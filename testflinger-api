FROM python:3.8-slim-buster

# REST api
EXPOSE 8000

# facilitate logging
RUN mkdir -p /var/log/testflinger \
  && chmod 777 /var/log/testflinger

# clone src
WORKDIR /data
RUN git clone https://git.launchpad.net/testflinger

# run setup
WORKDIR /data/testflinger
RUN ./setup.py install

# copy tf config files
COPY ./code/testflinger.conf /data/testflinger
